<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Basic Installation &mdash; analytics_automated 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="analytics_automated 1.0 documentation" href="index.html" />
    <link rel="next" title="How The System Works" href="how_it_works.html" />
    <link rel="prev" title="Analytics Automated" href="index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="basic-installation">
<h1>Basic Installation<a class="headerlink" href="#basic-installation" title="Permalink to this headline">¶</a></h1>
<p>This guide will take you through setting up A_A in development mode. Analytics
automated is a Django application and has a couple of required dependencies</p>
<ul class="simple">
<li>Python3</li>
<li>postgreSQL</li>
<li>Erlang</li>
<li>rabbitMQ</li>
<li>Celery</li>
<li>django 1.8</li>
</ul>
<div class="section" id="code-dependancies">
<h2>Code Dependancies<a class="headerlink" href="#code-dependancies" title="Permalink to this headline">¶</a></h2>
<p>1. Get Python 3. You may also wish to sort out virtualenv and run the application
within that, however that is beyond the scope of this installation guide:</p>
<div class="highlight-python"><div class="highlight"><pre>https://www.python.org/download/releases/3.0/
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li>Install postgreSQL.</li>
</ol>
<p>If you&#8217;re on a mac we advise using brew:</p>
<div class="highlight-python"><div class="highlight"><pre>brew install postgres
</pre></div>
</div>
<p>If you&#8217;re in a linux env some manner of:</p>
<div class="highlight-python"><div class="highlight"><pre>yum install postgres
</pre></div>
</div>
<p>or:</p>
<div class="highlight-python"><div class="highlight"><pre>apt-get install postgres
</pre></div>
</div>
<p>3. Erlang, rabbitMQ requires this, you may not have it installed and compiled. It&#8217;s
available via</p>
<blockquote>
<div><p><a class="reference external" href="http://www.erlang.org/download.html">http://www.erlang.org/download.html</a></p>
<p><a class="reference external" href="http://www.erlang.org/doc/installation_guide/INSTALL.htm">http://www.erlang.org/doc/installation_guide/INSTALL.htm</a></p>
</div></blockquote>
<ol class="arabic" start="4">
<li><p class="first">RabbitMQ, the message queue that the app and celery use</p>
<blockquote>
<div><p><a class="reference external" href="https://www.rabbitmq.com/install-generic-unix.html">https://www.rabbitmq.com/install-generic-unix.html</a></p>
</div></blockquote>
</li>
<li><p class="first">Get the A_A code from github:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; git clone https://github.com/AnalyticsAutomated/analytics_automated.git
</pre></div>
</div>
</li>
</ol>
<p>This will place the code in a dir called <cite>analytics_automated/</cite></p>
<ol class="arabic" start="6">
<li><p class="first">Install the python packages needed:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; cd analytics_automated/
&gt; pip install -r requirements/dev.txt
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="pre-launch-configuration">
<h2>Pre-launch configuration<a class="headerlink" href="#pre-launch-configuration" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>You need to setup some bits and pieces in postgres before we start</li>
</ol>
<blockquote>
<div><ul>
<li><p class="first">You may need to initialise postgres:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; initdb -D [SOME_PATH
</pre></div>
</div>
</li>
<li><p class="first">Start the postgres daemon:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; pg_ctl start -l /scratch0/NOT_BACKED_UP/dbuchan/postgres/logfile
</pre></div>
</div>
</li>
<li><p class="first">Then login:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; psql -h localhost -d postgres
</pre></div>
</div>
</li>
<li><p class="first">Now create the django db user for A_A</p>
</li>
</ul>
</div></blockquote>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">CREATE</span> <span class="k">ROLE</span> <span class="n">a_a_user</span> <span class="k">WITH</span> <span class="n">LOGIN</span> <span class="n">PASSWORD</span> <span class="s1">&#39;thisisthedevelopmentpasswordguys&#39;</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">analytics_automated_db</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span> <span class="k">ON</span> <span class="k">DATABASE</span> <span class="n">analytics_automated_db</span> <span class="k">TO</span> <span class="n">a_a_user</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">USER</span> <span class="n">a_a_user</span> <span class="k">CREATEDB</span><span class="p">;</span>
</pre></div>
</div>
<p>2. Now configure Django. We maintain the idea of seperate secrets files
which only you have control of. You need to create these and populate them.
base_secrets.json at site wide settings which dev and production will use.
dev_secrets.json are settings which only the dev installation will will access.
A production system will need a production_secrets.json</p>
<blockquote>
<div><ul>
<li><p class="first">Create the files we need:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; cd analytics_automated_project/settings
&gt; touch base_secrets.json`
&gt; touch dev_secrets.json`
</pre></div>
</div>
</li>
<li><p class="first">If you&#8217;re using bugsnag add your bugsnag key to base_secrets.json:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
  <span class="s">&quot;BUGSNAG&quot;</span><span class="p">:</span> <span class="s">&quot;YOUR KEY HERE&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Add the dev_secrets.json settings needed to start in developments mode. The
postgres login credentials and the secret key:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
  <span class="s">&quot;USER&quot;</span><span class="p">:</span> <span class="s">&quot;a_a_user&quot;</span><span class="p">,</span>
  <span class="s">&quot;PASSWORD&quot;</span><span class="p">:</span> <span class="s">&quot;thisisthedevelopmentpasswordguys&quot;</span><span class="p">,</span>
  <span class="s">&quot;SECRET_KEY&quot;</span><span class="p">:</span> <span class="s">&quot;VERY LONG KEY HERE&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Next open the base settings files in <cite>analytics_automated_project/settings/base.py</cite>
In here you&#8217;ll find a section at the top labelled &#8220;Required A_A user settings&#8221;.
These are all the things you need set for the app to run. We prefer to keep
theses settings in dev.py and production.py files. Then we can start the server
in different configs for different purposes.</p>
<p>Either uncomment all these in base.py or move them to dev.py or production.py and
set them there. You can leave the smtp settings commented if you do not wish to
send alerts via email to your users.</p>
</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Starting A_A in development localhost mode</li>
</ol>
<blockquote>
<div><ul>
<li><p class="first">Start rabbitMQ, if you want to start this in daemon mode consult the rabbitMQ docs:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; rabbitmq-server
</pre></div>
</div>
</li>
<li><p class="first">Start the celery workers, from the root dir of A_A. Note that we have to specify
the rabbit queues the workers read from (-Q), for the basic settings we&#8217;ll have
these workers just watch the celery and localhost queues:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; cd analytics_automated/
&gt; celery --app=analytics_automated_project.celery:app worker --loglevel=INFO -Q localhost,celery
</pre></div>
</div>
</li>
<li><p class="first">Run the Django migrations to configure the database:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; cd analytics_automated/
&gt; python manage.py migrate --settings=analytics_automated_project.settings.dev
</pre></div>
</div>
</li>
<li><p class="first">Add an admin user to the Django application:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; cd analytics_automated/
&gt; python manage.py createsuperuser
</pre></div>
</div>
</li>
<li><p class="first">Now start A_A, again from the root dir of the app. Note we&#8217;ll start it assuming
you put the users settings in settings/dev.py:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; cd analytics_automated/
&gt; python manage.py runserver --settings=analytics_automated_project.settings.dev
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>You should now be running all the components of A_A on a single machine with
a set of workers watching the localhost queue. This means we can now configure
data analysis pipelines which run code on the machine which the workers are running on.
This is the most basic setup we can run rabbitMQ, the web app, the database and the workers
on completely separate machines and even run multiple instances of the workers watching
the same queue. We&#8217;ll deal with this set in the <a class="reference internal" href="advanced.html#advanced-uses"><span>Advanced Uses</span></a> tutorial.</li>
<li>Now move on to <a class="reference internal" href="how_it_works.html#how-it-works"><span>How The System Works</span></a></li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Basic Installation</a><ul>
<li><a class="reference internal" href="#code-dependancies">Code Dependancies</a></li>
<li><a class="reference internal" href="#pre-launch-configuration">Pre-launch configuration</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Analytics Automated</a></li>
      <li>Next: <a href="how_it_works.html" title="next chapter">How The System Works</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Daniel Buchan.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/installation.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>